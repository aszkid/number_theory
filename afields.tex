\section{A primer of algebraic number fields}


Having acquired some algebraic language, we can consider quadratic rings in context. Given a finite field extension $K$ of $\bbQ$ (also called an \emph{algebraic number field}), we consider its subring $\calO_K\subset K$ of elements integral over $\bbZ$. We call this the \emph{ring of integers} of $K$.

An element $k\in K$ is \emph{integral over $\bbZ$} if it satisfies a monic polynomial equation
\[
	k^n + a_{n-1}k^{n-1} + \cdots + a_1k + a_0 = 0
\]
with coefficients $a_i\in\bbZ$.

We note that quadratic fields $\bbQ(\sqrt{D})$ are a special case of general algebraic number fields. Furthermore, any element $x=a+b\sqrt{D}\in\bbZ[\sqrt{D}]$ as defined in ยง1 satisfies the monic polynomial equation $x^2-2ax-(b^2D-a^2)=0$, and any number in $\bbQ(\sqrt{D})$ satisfying such an equation is necessarily of the form $a+b\sqrt{D}$ with $a,b\in\bbZ$.

The classical procedure in number theory is to consider finite extensions $K$ of the field $\bbQ$ by adjoining roots:

\begin{center}
	\begin{tikzcd}
		\calO_L \arrow[r,hook] & L\\
		\calO_K \arrow[u]\arrow[r,hook] & K \arrow[u]\\
		\calO_{\bbQ} = \bbZ \arrow[r,hook]\arrow[u,hook] & \bbQ \arrow[u,hook]
	\end{tikzcd}
\end{center}


Number theorists particularly care about the structure of $\calO_L$ and $\calO_K$, the integral extensions 
\begin{itemize}
	\item What are the units of $\calO_K$ and $\calO_L$?
	\item How do primes $(\mathfrak{p})$ of $\calO_K$ split in $\calO_l$?
\end{itemize}

The first question culminates in \emph{Dirichlet's unit theorem}, which fully describes (???). The second one corresponds to \emph{ramification theory}.


\subsection{Modules and integrality}

The question of integrality is fundamental in the study of number fields, and it proves useful to develop the theory in its full generality.

For a given ring extension $A\subseteq B$, we say that $B$ is \emph{integral over $A$} if each element in $B$ is integral over $A$.

Integral elements of ring extensions have a very nice finiteness property when considering the $A$-module they generate.

\begin{proposition}
	Finitely many elements $b_1,\dots,b_n\in B$ are integral over $A$ iff the $A$-module $A[b_1,\dots,b_n]$ is finitely generated.\footnote{Neukirch 2.2}
\end{proposition}
\begin{proof}
	($\Longrightarrow$) Start by assuming that $b\in B$ is integral over $A$. Then $f(b)=0$ for some polynomial $f(x)$ over $A$. Now let $g(x)\in A[x]$: by the division algorithm, we have $g(x)=q(x)f(x)+r(x)$ with polynomials over $A$ and $\deg r(x) < \deg g(x)$.

	In particular, passing to $A[b]$, we have $g(b)=r(b)=a_0+a_1b+\cdots+a_{n-1}b^{n-1}$. So any element in $A[b]$ is generated by $\{1,b,\dots,b^{n-1}\}$, i.e. $A[b]$ is finitely generated.

	Now assume that $R=A[b_1,\dots,b_{n-1}]$ is finitely generated for $b_1,\dots,b_n\in B$ integral over $A$. The same argument shows that $R[b_n]$ is finitely generated too, since $b_n$ is integral over $A$ and hence over $R$ as well. Induction proves the result.

	($\Longleftarrow$) Now assume that $A[b_1,\dots,b_n]$ is finitely generated. Let $\omega_1,\dots,\omega_r$ be a system of generators. Take any $b\in A[b_1,\dots,b_n]$; we have
	\begin{align*}
		(b-a_{11})\omega_1 + \cdots + (-a_{1r})\omega_r &= 0\\
		\vdots &= 0\\
		(-a_{i1})\omega_1 + \cdots + (b-a_{ii})\omega_i + \cdots + (-a_{ir})\omega_r&=0\\
		\vdots &= 0\\
		(-a_{r1})\omega_1 + \cdots + (b-a_{rr})\omega_r &= 0
	\end{align*}
	for $1\leq i\leq r$. This gives a system of equations, which in matrix form can be written as $bI - (a_{ij})$. We have that $(bI-(a_{ij}))\omega_i = 0$, so $\det(bI-(a_{ij}))\omega_i = 0$, but $\omega_i\neq 0$ so necessarily $\det(bI-(a_{ij}))=0$. This gives a polynomial over $A$ for which $b$ is a root, so $b$ is integral over $A$.
\end{proof}

Note that the result is even stronger: any $b\in A[b_1,\dots,b_n]$ is integral over $A$. Compare this result to an arbitrary ring extension $A[b]$, which is not necessarily finitely generated as an $A$-module, just like the polynomial ring $A[x]$.

Closure of ring operations makes $A[b_1,\dots,b_n]$ into a ring that is integral over $A$, if $b_1,\dots,b_n\in B$ are.

\begin{proposition}
	Let $A\subseteq B\subseteq C$ be ring extensions. If $B$ is integral over $A$ and $C$ is integral over $B$, then $C$ is integral over $A$.
\end{proposition}
\begin{proof}
	Fix $c\in C$: since $C$ is integral over $B$, we have an equation $c^n+b_1c^{n-1}+\cdots+b_n=0$ with coefficients in $B$. In particular $R=A[b_1,\dots,b_n]$ is finitely generated because $B$ is integral over $A$, and $R[c]$ as well because $c$ is integral over $B$. But these two facts combined make $R[c]$ finitely generated over $A$\todo{Why?}, which implies that $c$ is integral over $A$.
\end{proof}

We call the set $\overline{A}=\{b\in B \mid b \text{ integral over } A\}$ the \emph{integral closure of $A$}, and say that $A$ is \emph{integrally closed} if $A=\overline{A}$. Note that $A$ is trivially integral over $A$ because $a\in A$ is a solution to the monic polynomial $x-a=0$, hence $A\subset\overline{A}$. Hence we have the chain $A\subset \overline{A}\subset\overline{\overline{A}}$ of integral closures, and applying the previous proposition we get that $\overline{\overline{A}}$ is integral over $A$, so $\overline{\overline{A}}\subset\overline{A}$. The two inclusions imply that $\overline{A}=\overline{\overline{A}}$, i.e. $\overline{A}$ is integrally closed, so it makes sense to call it the `integral closure' of $A$.


\subsection{Trace and norm}

Consider a field extension $L\mid K$. The following concepts will prove useful in studying the integral elements of $L$.

\begin{definition}
	The \emph{trace} and \emph{norm} of some $x\in L$ are defined as the trace and norm of the matrix $[T_x]$ representing the endomorphism $T_x:L\to L$ given by $T_x(\alpha)=x\alpha$, i.e.
	\begin{align*}
		\Tr_{L\mid K}(x) = \Tr([T_x]) & & \N_{L\mid K}(x) = \det([T_x]).
	\end{align*}
\end{definition}

We only need to compute the action of trace and norm on some basis to get the field trace and norm: for example, with $K=\bbR$ and $L=\bbC$, in we have a basis $\{1,i\}$ and so $T_z(1)=a+bi$ and $T_z(i)=-b+ai$. This gives the matrix
\[
	\begin{bmatrix}
		a & -b\\
		b & a
	\end{bmatrix},
\]
the trace and norm of which are $2a$ and $a^2+b^2$, which is the familiar `Euclidean' norm on $\bbC$.\todo{Is this really related to the vector norm?}


\begin{proposition}
	The trace $\Tr_{L\mid K}$ is a $K$-linear additive homomorphism $L\to K$, and the norm $\N_{L\mid K}$ is a multiplicative homomorphism $L^\times\to K^\times$.
\end{proposition}
\begin{proof}
	This amounts to passing to matrix representations as needed.

	First of all, it is clear that $T_{x+y}=T_x+T_y$, and $T_{xy}=T_x\circ T_y$. Now pick a basis for $L\mid K$ and find the matrix representations of $T_x$ and $T_y$. We have that
	\begin{align*}
		\Tr_{L\mid K}(x+y)=\Tr([T_{x+y}])&=\Tr([T_x+T_y])\\
			&=\Tr([T_x])+\Tr([T_y])\\
			&= \Tr_{L\mid K}(x)+\Tr_{L\mid K}(y),
	\end{align*}
	so the `field' trace is at least additive, just as the usual trace is so.

	Similarly, we have
	\begin{align*}
		\N_{L\mid K}(xy) = \det([T_{xy}]) &= \det([T_x][T_y])\\
			&= \det([T_x])\det([T_y])\\
			&= \N_{L\mid K}(x)\N_{L\mid K}(y),
	\end{align*}
	so the `field' norm is multiplicative.

	For $K$-linearity of the trace, fix $c\in K$ and $x\in L$: as an endomorphism, we have $T_{cx}(\alpha)=c T_x(\alpha)$, so
	\begin{align*}
		\Tr_{L\mid K}(cx) = \Tr([T_{cx}]) &= \Tr(c[T_x])\\
			&= c\Tr([T_x])\\
			&= c \Tr_{L\mid K}(x).
	\end{align*}

	And additivity extends this to finitely many terms, so the trace is $K$-linear.
\end{proof}




Given $n=[L : K]$, the characteristic polynomial\footnote{Of course, given by any \emph{matrix representation} of $T_x$, relative to the extension $L\mid K$.} of $T_x$ is
\[
	f_x(t) = \det(tI - [T_x]) = t^n - a_1t^{n-1} + \cdots + (-1)^na_n.
\]
Note that $a_1=\Tr_{L\mid K}(x)$ and $a_n=\N_{L\mid K}(x)$, and the degree of $f_x(t)$ is always fixed relative to $L\mid K$.

On the other hand, the minimal polynomial $p_x(t)$ of any $x\in L$ over $K$ has degree $[K(x) : K]$, which depends on course on the choice of $x$.



We now study the close interplay between the characteristic and the minimal polynomial.

\begin{proposition}
	Every $x \in L$ is a root of the characteristic polynomial of $T_x$.
\end{proposition}
\begin{proof}
	This follows from Cayley-Hamilton: considering $f_x$ as a linear operator, evaluating at the matrix $[T_x]$ is zero by definition, but we can expand it with addition being usual matrix addition, and powers being repeated matrix multiplication. Then
	\begin{align*}
		0 = f_x([T_x]) &= [T_x]^n - a_1[T_x]^{n-1} + \cdots + (-1)^na_n I\\
			&= [T_{x^n}] - a_1[T_{x^{n-1}}] + \cdots + (-1)^na_n I\\
			&= [T_{x^n}] - [T_{a_1x^{n-1}}] + \cdots + (-1)^n_an I\\
			&= [T_{x^n-a_1x^{n-1} + \cdots + (-1)^na_n}]\\
			&= [T_{f_x(x)}],
	\end{align*}
	which implies that $T_{f_x(x)}=0$, i.e. $f_x(x)=0$.
\end{proof}

\begin{proposition}
	Fix $x\in L$, let $p_x(t)$ be the minimal polynomial of $x$ and $f_x(t)$ the characteristic polynomial of $T_x$. Then
	\[
		f_x(t) = (p_x(t))^{n/d},
	\]
	where $n=[L:K]$ and $d=[K(x):K]$.
\end{proposition}
\begin{proof}
\end{proof}

Note that if $L=K(x)$, we have that $f_x(t)=p_x(t)$.


A special form for field trace and norm can be given if $L\mid K$ is a separable extension.

\begin{proposition}
	Given a separable field extension $L\mid K$ and $\sigma : L\to\overline{K}$ is a $K$-embedding of $L$, we have
	\begin{enumerate}[(i)]
		\item $f_x(t)= \prod_\sigma(t-\sigma x)$,
		\item $\Tr_{L\mid K}(x) = \sum_\sigma \sigma x$, and
		\item $\N_{L\mid K}(x) = \prod_\sigma \sigma x$.
	\end{enumerate}
\end{proposition}





\subsection{Integrality continued -- integral bases}
